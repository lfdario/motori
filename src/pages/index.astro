---
import Base from "@/layouts/Base.astro";
import ArticleCard from "@/components/ArticleCard.astro";
import { getCollection } from "astro:content";
const latestNews = (await getCollection("news")).sort((a,b) => (b.data.pubDate).localeCompare(a.data.pubDate)).slice(0,8);
const latestTests = (await getCollection("tests")).sort((a,b) => (b.data.pubDate).localeCompare(a.data.pubDate)).slice(0,4);
const latestGuides = (await getCollection("guides")).sort((a,b) => (b.data.pubDate).localeCompare(a.data.pubDate)).slice(0,4);
---
<Base title="Motori • News, Prove, Elettrico" description="Notizie auto, prove su strada, elettrico, guide all'acquisto.">
  <section class="hero-motori mb-10 rounded-3xl overflow-hidden border bg-white/80 dark:bg-gray-900/70">
    <div class="grid md:grid-cols-2">
      <div class="p-6 md:p-10">
        <div class="text-[11px] uppercase tracking-wide text-blue-600 mb-2">In evidenza</div>
        <h1 class="text-3xl md:text-4xl font-extrabold leading-tight mb-3">Tutto sui Motori: novità, prove su strada e auto elettriche</h1>
        <p class="text-gray-600 dark:text-gray-300 mb-6">Approfondimenti chiari e dati verificabili: restyling, listini, consumi e tecnologia.</p>
        <div class="flex gap-3">
          <a href={`${import.meta.env.BASE_URL}news/`} class="px-4 py-2 rounded-xl border">Leggi le News</a>
          <a href={`${import.meta.env.BASE_URL}tests/`} class="px-4 py-2 rounded-xl border">Ultime Prove</a>
        </div>
      </div>
      <div class="h-56 md:h-full">
        <img alt="Hero Motori" src={`${import.meta.env.BASE_URL}images/placeholder.jpg`} class="w-full h-full object-cover"/>
      </div>
    </div>
  </section>

  <section class="grid gap-6">
    <h2 class="text-xl font-bold">Ultime News</h2>
    <div class="grid md:grid-cols-2 gap-4">
      {latestNews.map((p) => (
        <ArticleCard
          href={`${import.meta.env.BASE_URL}news/${p.slug}/`}
          cover={p.data.cover ?? `${import.meta.env.BASE_URL}images/placeholder.jpg`}
          title={p.data.title}
          excerpt={p.data.description}
          category="News"
          date={new Date(p.data.pubDate).toLocaleDateString("it-IT")}
        />
      ))}
    </div>
  </section>

  <section class="grid gap-6 mt-10">
    <h2 class="text-xl font-bold">Ultime Prove</h2>
    <div class="grid md:grid-cols-2 gap-4">
      {latestTests.map((p) => (
        <ArticleCard
          href={`${import.meta.env.BASE_URL}tests/${p.slug}/`}
          cover={p.data.cover ?? `${import.meta.env.BASE_URL}images/placeholder.jpg`}
          title={p.data.title}
          excerpt={p.data.description}
          category="Prove"
          date={new Date(p.data.pubDate).toLocaleDateString("it-IT")}
        />
      ))}
    </div>
  </section>

  <section class="grid gap-6 mt-10">
    <h2 class="text-xl font-bold">Guide</h2>
    <div class="grid md:grid-cols-2 gap-4">
      {latestGuides.map((p) => (
        <ArticleCard
          href={`${import.meta.env.BASE_URL}guides/${p.slug}/`}
          cover={p.data.cover ?? `${import.meta.env.BASE_URL}images/placeholder.jpg`}
          title={p.data.title}
          excerpt={p.data.description}
          category="Guide"
          date={new Date(p.data.pubDate).toLocaleDateString("it-IT")}
        />
      ))}
    </div>
  </section>
</Base>
